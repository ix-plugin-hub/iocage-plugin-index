freebsd_instance:
  cpu: 4
  memory: "4"

env:
  HOME: "/root"
  PATH: "/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/root/bin"
  USER: "root"

install_template: &INSTALL_PLUGIN
  install_script: .cirrus/install_script.sh

bind_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('bind.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "bind.json"

dnsmasq_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('dnsmasq.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "dnsmasq.json"

duplicati_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('duplicati.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "duplicati.json"

irssi_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('irssi.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "irssi.json"

openspeedtest-server_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('openspeedtest-server.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "openspeedtest-server.json"

quasselcore_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('quasselcore.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "quasselcore.json"
    SKIP_UI_CHECK: "true"

weechat_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('weechat.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "weechat.json"

xmrig_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('xmrig.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "xmrig.json"