freebsd_instance:
  cpu: 4
  memory: "4"

env:
  HOME: "/root"
  PATH: "/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/root/bin"
  USER: "root"

install_template: &INSTALL_PLUGIN
  install_script: .cirrus/install_script.sh

jenkins_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('jenkins.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "jenkins.json"
    OVERRIDE_ADMIN_UI: "http://<IP>:8080/login"

jenkins-lts_task:
  <<: *INSTALL_PLUGIN
  only_if: "changesInclude('jenkins-lts.json', '.cirrus/install_script.sh')"
  matrix:
    - freebsd_instance:
        image_family: freebsd-12-2
  env:
    PLUGIN_FILE: "jenkins-lts.json"
    OVERRIDE_ADMIN_UI: "http://<IP>:8080/login"
